<div *ngIf="isAdmin && !hasProfile" class="text-center">
  <p i18n="">Votre profil n'a pas encore été renseigné&nbsp;!</p>
  <button mat-raised-button type="button" color="primary" (click)="openProfileFormDialog()">
    <span i18n="">Renseigner votre profil</span>
  </button>
</div>

<ng-container *ngIf="profile$ | async as profile">
  <h2 class="color-primary mx-3 mb-3">
    <fa-icon *ngIf="!profile?.avatar" [icon]="faUserCircle"></fa-icon>
    {{ profile?.name }}
  </h2>

  <mat-tab-group [backgroundColor]="'accent'" dynamicHeight>
    <!-- Public Profile -->

    <mat-tab>
      <ng-template mat-tab-label>
        <fa-icon [icon]="faUser"></fa-icon>
        <span>Profil</span>
      </ng-template>
      <div *ngIf="profile" class="p-3 row">
        <app-profile-ratings [profileRatings]="profile?.ratings" class="col-md-6"></app-profile-ratings>
        <app-profile-detail [profileDetail]="profile" class="col-md-4 offset-md-2"></app-profile-detail>
      </div>
      <app-profile-comment-list *ngIf="comments"></app-profile-comment-list>
    </mat-tab>

    <!-- Games -->

    <mat-tab>
      <ng-template mat-tab-label>
        <fa-icon [icon]="faDice"></fa-icon>
        <span>Jeux</span>
      </ng-template>
      <app-spinner *ngIf="isLoadingGames" [message]="'BoardGameGeek'"></app-spinner>
      <div *ngIf="!isLoadingGames">
        <app-game-list *ngIf="games" [games]="games"></app-game-list>
        <p *ngIf="!games" i18n>Aucun jeu n'a été trouvé.</p>
      </div>
    </mat-tab>

    <!-- Events -->

    <mat-tab>
      <ng-template mat-tab-label>
        <fa-icon [icon]="faCalendarAlt"></fa-icon>
        <span>Évènements</span>
      </ng-template>
      <app-spinner *ngIf="isLoadingEvents" [message]="'Évènements'"></app-spinner>
      <div *ngIf="!isLoadingEvents">
        <app-event-list *ngIf="events" [events]="events"></app-event-list>
        <p *ngIf="!events" i18n>Aucun évènement n'a été trouvé.</p>
      </div>
    </mat-tab>

    <!-- Locations -->

    <mat-tab>
      <ng-template mat-tab-label>
        <fa-icon [icon]="faMapMarked"></fa-icon>
        <span>Lieux</span>
      </ng-template>
      <app-spinner *ngIf="isLoadingLocations" [message]="'Lieux'"></app-spinner>
      <div *ngIf="!isLoadingLocations">
        <app-location-list [locations]="locations"></app-location-list>
        <p *ngIf="!locations" i18n>Aucun lieu n'a été trouvé.</p>
      </div>
    </mat-tab>

    <!-- Profile Settings -->

    <mat-tab *ngIf="isAdmin">
      <ng-template mat-tab-label>
        <fa-icon [icon]="faCogs"></fa-icon>
        <span>Paramètres</span>
      </ng-template>
      <app-profile-privacy-form
        [profilePrivacy]="profile.privacy"
        (saveProfilePrivacy)="saveProfilePrivacy($event)"
      ></app-profile-privacy-form>
      <app-profile-settings (deleteProfile)="deleteProfile()"></app-profile-settings>
    </mat-tab>
  </mat-tab-group>
</ng-container>
